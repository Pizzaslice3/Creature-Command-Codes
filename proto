/* eslint-disable  func-names */
/* eslint quote-props: ["error", "consistent"]*/
/**
 * This sample demonstrates a sample skill built with Amazon Alexa Skills nodejs
 * skill development kit.
 * This sample supports multiple languages (en-US, en-GB, de-GB).
 * The Intent Schema, Custom Slot and Sample Utterances for this skill, as well
 * as testing instructions are located at https://github.com/alexa/skill-sample-nodejs-howto
 **/

'use strict';

const Alexa = require('alexa-sdk');
const recipes = require('./recipes');

const APP_ID = undefined; // TODO replace with your app ID (OPTIONAL).

//Constants for all of the characters that can be stored inside the player variable (These are just placeholders)
const varu = 1;
const momolt = 2;
const babool = 3;
var klaki = 4;

var crit = 1.5;
var pOneHp = 50;
var pTwoHp = 50;

var turn = 1;

//The first player character variable that will store the character chosen (Placeholders)
var firstPlayerChar;
var pselection = 1;
var secondPlayerChar;

//content variables
var chooseVaru = {
     "hasDisplaySpeechOutput" : "Choose an attack",
     "hasDisplayRepromptText" : "Don't forget to choose an attack",
     "simpleCardTitle" : "Current Health:",
     "simpleCardContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "bodyTemplateTitle" : "Current Health:",
     "bodyTemplateContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Varu+Screen+Player1.png",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
  
  
var chooseBabool = {
     "hasDisplaySpeechOutput" : "Choose an attack",
     "hasDisplayRepromptText" : "Don't forget to choose an attack",
     "simpleCardTitle" : "Current Health:",
     "simpleCardContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "bodyTemplateTitle" : "Current Health:",
     "bodyTemplateContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.console.aws.amazon.com/s3/object/cre-imgs/Creature%2520Command%2520Babool%2520Screen%2520Player1.png?region=us-east-1&tab=overview",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
     
     
var chooseMomolt = {
     "hasDisplaySpeechOutput" : "Choose an attack",
     "hasDisplayRepromptText" : "Don't forget to choose an attack",
     "simpleCardTitle" : "Current Health:",
     "simpleCardContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "bodyTemplateTitle" : "Current Health:",
     "bodyTemplateContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Momolt+Screen+Player1.png",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
  
  
var chooseKlaki = {
     "hasDisplaySpeechOutput" : "Choose an attack",
     "hasDisplayRepromptText" : "Don't forget to choose an attack",
     "simpleCardTitle" : "Current Health:",
     "simpleCardContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "bodyTemplateTitle" : "Current Health:",
     "bodyTemplateContent" : "Player One HP: " + pOneHp + "/50  Player Two HP: " + pTwoHp + "/50",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Klaki+Screen+Player1.png",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
  
  var charSelectOne = {
    "hasDisplaySpeechOutput" : "Player one choose your Character",
    "hasDisplayRepromptText" : "Please choose your character",
    "simpleCardTitle" : "",
    "simpleCardContent" : "",
    "bodyTemplateTitle" : "",
    "bodyTemplateContent" : "",
    "templateToken" : "factBodyTemplate",
    "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Character+Screen+Player1.png",
    "askOrTell" : ":ask",
    "sessionAttributes": {}
};

  var charSelectTwo = {
    "hasDisplaySpeechOutput" : "Player two choose your Character",
    "hasDisplayRepromptText" : "Please choose your character",
    "simpleCardTitle" : "",
    "simpleCardContent" : "",
    "bodyTemplateTitle" : "",
    "bodyTemplateContent" : "",
    "templateToken" : "factBodyTemplate",
    "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Character+Screen+Player2.png",
    "askOrTell" : ":ask",
    "sessionAttributes": {}
  };

var char1Win = {
     "hasDisplaySpeechOutput" : "Player 1 Wins!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+End+Screen.png",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
  };
  
  
var char2Win = {
              "hasDisplaySpeechOutput" : "Player 1 Wins!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+End+ScreenPlayer2.png",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
  };
          
var fireballVaruLeft = {
     "hasDisplaySpeechOutput" : "Varu used fireball",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/VaruFireP1.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var fireballVaruRight = {
     "hasDisplaySpeechOutput" : "Varu used fireball",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/VaruFireP2.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var tornadoVaruLeft = {
     "hasDisplaySpeechOutput" : "Varu used tornado",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/VaruTornadoP1.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var tornadoVaruRight = {
     "hasDisplaySpeechOutput" : "Varu used tornado",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/VaruTornadoP2.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var icespinKlakLeft = {
     "hasDisplaySpeechOutput" : "Klak used Ice Spin",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/KlakiIceP2.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var icespinKlakRight = {
     "hasDisplaySpeechOutput" : "Klak used Ice Spin",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/KlakiIceP1.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var waterblastKlakLeft = {
     "hasDisplaySpeechOutput" : "Klak used Waterblast",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/KlakiWaterP1.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var waterblastKlakRight = {
     "hasDisplaySpeechOutput" : "Klak used Waterblast",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "https://s3.amazonaws.com/cre-imgs/KlakiWaterP2.jpg",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var punchMomoltLeft = {
     "hasDisplaySpeechOutput" : "Momolt used punch!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
var punchMomoltRight = {
     "hasDisplaySpeechOutput" : "Momolt used punch!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};

var earthquakeMomoltLeft = {
     "hasDisplaySpeechOutput" : "Momolt used earthquake!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":ask",
     "sessionAttributes": {}
};
var earthquakeMomoltRight = {
     "hasDisplaySpeechOutput" : "Momolt used earthquake!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":tell",
     "sessionAttributes": {}
};

var rocksBaboolLeft = {
     "hasDisplaySpeechOutput" : "Babool used rocks!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":tell",
     "sessionAttributes": {}
};
var rocksBaboolRight = {
     "hasDisplaySpeechOutput" : "Babool used rocks!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":tell",
     "sessionAttributes": {}
};

var waterpumpBaboolLeft = {
     "hasDisplaySpeechOutput" : "Babool used waterpump!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":tell",
     "sessionAttributes": {}
};
var waterpumpBaboolRight = {
     "hasDisplaySpeechOutput" : "Babool used waterpump!",
     "hasDisplayRepromptText" : "",
     "simpleCardTitle" : "",
     "simpleCardContent" : "",
     "bodyTemplateTitle" : "",
     "bodyTemplateContent" : "",
     "templateToken" : "factBodyTemplate",
     "bgimg": "The URL for the card",
     "askOrTell" : ":tell",
     "sessionAttributes": {}
};

const languageStrings = {
    'en': {
        translation: {
            RECIPES: recipes.RECIPE_EN_US,
            SKILL_NAME: 'Creature command',
            WELCOME_MESSAGE: "Welcome to creature command Please choose a character!",
            WELCOME_REPROMPT: 'For instructions on what you can say, please say help me.',
            DISPLAY_CARD_TITLE: 'Welcome to Creature command',
            HELP_MESSAGE: "You can ask questions such as, what\'s the recipe, or, you can say exit...Now, what can I help you with?",
            HELP_REPROMPT: "You can say things like, what\'s the recipe, or you can say exit...Now, what can I help you with?",
            STOP_MESSAGE: 'Goodbye!',
            RECIPE_REPEAT_MESSAGE: 'Try saying repeat.',
            RECIPE_NOT_FOUND_MESSAGE: "I\'m sorry, I currently do not know ",
            RECIPE_NOT_FOUND_WITH_ITEM_NAME: 'the recipe for %s. ',
            RECIPE_NOT_FOUND_WITHOUT_ITEM_NAME: 'that recipe. ',
            RECIPE_NOT_FOUND_REPROMPT: 'What else can I help with?',
        },
    },
   };

const handlers = {
  //displays health for players after attacks are done.
    'resetIntent' : function(){
  firstPlayerChar = null;
  secondPlayerChar = null;
  pselection = 1;
  turn = 1;
  pOneHp = 50;
  pTwoHp = 50;
},

    'PlayVideoIntent' : function() {
      var text = "HEllo";
      var content = 14 + "is the HP"
              var content = {
             "hasDisplaySpeechOutput" : text,
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Body titile",
             "bodyTemplateContent" : content,
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+End+Screen.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
          
          renderTemplate.call(this, content);
    
    },


// This is the fireball attack for the creatue Varu 
'Fireball' : function() {      
  if (secondPlayerChar == varu && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
             doDmgPlayerTwo(varu, 'fireball');
             turn = 1;
//              if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, fireballVaruRight);
                 
                if(firstPlayerChar == 1){

          renderTemplate.call(this, chooseVaru);
                 
                }else if(firstPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);
          
                }else if(firstPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(firstPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/Varu_Tornado_Not_Final.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                    this.emit(':ask',"choose another attack");
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }else if (firstPlayerChar == varu && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
               doDmgPlayerOne(varu, 'fireball');
              turn = 2;
//                  if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, fireballVaruLeft);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);
               
                }if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);
               
                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     
                     this.emit(':ask',"choose another attack");
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':ask',"choose another attack");
},

// this is the tornado attack for the creature Varu
'Tornado' : function() {      
  if (secondPlayerChar == varu && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
             doDmgPlayerTwo(varu, 'tornado');
             turn = 1;
//                if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, tornadoVaruRight);
                 
                if(firstPlayerChar == 1){
                    
                        renderTemplate.call(this, chooseVaru);
                 
                }else if(firstPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(firstPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(firstPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/Varu_Tornado_Not_Final.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                     this.emit(':responseReady');
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }else if (firstPlayerChar == varu && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
               doDmgPlayerOne(varu, 'tornado');
              turn = 2;
//                  if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
              renderTemplate.call(this, tornadoVaruLeft);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     
                     this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},


'Earthquake' : function() {      
  if (secondPlayerChar == momolt && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
          // Change based on element and attack
             doDmgPlayerTwo(momolt, 'earthquake');
             turn = 1;
//                if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }

            renderTemplate.call(this, earthquakeMomoltRight);
                 
           if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/Varu_Tornado_Not_Final.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                     this.emit(':responseReady');
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }else if (firstPlayerChar == momolt && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
               doDmgPlayerOne(momolt, 'earthquake');
              turn = 2;
//                  if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, earthquakeMomoltLeft);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     
                     this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},
'Punch' : function() {      
  if (secondPlayerChar == momolt && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
          // Change based on element and attack
             doDmgPlayerTwo(momolt, 'punch');
             turn = 1;
//                if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }

            renderTemplate.call(this, punchMomoltRight);
                 
                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/Varu_Tornado_Not_Final.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                     this.emit(':responseReady');
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }else if (firstPlayerChar == momolt && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
               doDmgPlayerOne(momolt, 'punch');
              turn = 2;
//                  if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
              renderTemplate.call(this, punchMomoltLeft);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     
                     this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},

'Waterpump' : function(){

        if (secondPlayerChar == babool && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
            doDmgPlayerTwo(babool, "waterpump");
             turn = 1;
             //   if (pOneHp <= 0 && pTwoHp > 0)
             //  {
             //   winCondition("Player 2 Wins!");
             //   this.emit(':responseReady');
             // }
            renderTemplate.call(this, waterpumpBaboolRight);

            if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
            //this.response.playVideo(/*Plays the Waterpump attack animation (Right side)*/);
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }
    
      
        if (firstPlayerChar == babool && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
              doDmgPlayerOne(babool, "waterpump");
              turn = 2;
//                 if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, waterpumpBaboolLeft);

              if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
              this.response.playVideo("https://s3.amazonaws.com/creaturecommand/Babool_Water_Blast(Still+Rough).mp4");
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},

'Rocks' : function() {
        if (secondPlayerChar == babool && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
            doDmgPlayerTwo(babool, "rocks");
             turn = 1;
//               if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, rocksBaboolRight);

            if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
            //this.response.playVideo(/*Plays the Waterpump attack animation (Right side)*/);
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }
    

        if (firstPlayerChar == babool && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
              doDmgPlayerOne(babool, 'waterpump');
              turn = 2;
//                 if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, rocksBaboolLeft);

              if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
              this.response.playVideo('https://s3.amazonaws.com/creaturecommand/Babool_Psychic(Still_Rough).mp4');
              this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},


// This is the waterblast attack for Klaki 
'waterblast' : function() {
    
    console.log("This is turn"+turn);
    console.log(" water blast this is fpchar"+firstPlayerChar);
    
        if (secondPlayerChar == klaki && turn == 2){
            console.log("THIS IS TRUE PLAYER TWO!!!!!!!");
            turn = 1;
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
             doDmgPlayerTwo(klaki, 'waterBlast');
           //   if (pOneHp <= 0 && pTwoHp > 0)
           // {
           //    winCondition("Player 2 Wins!");
           //   this.emit(':responseReady')
           //   }
                renderTemplate.call(this, waterblastKlakRight);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/klaki_water_attack.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                     this.emit(':responseReady');
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }else if (firstPlayerChar == klaki && turn == 1){
            console.log("THIS IS TRUE PLAYER ONE!!!!!!!");
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
             doDmgPlayerOne(klaki, 'waterBlast');
              turn = 2;
             //    if (pTwoHp <= 0 && pOneHp > 0)
             //  {
             //   winCondition("Player 1 Wins!");
             //   this.emit(':responseReady');
             // }
             renderTemplate.call(this, waterblastKlakLeft);
                
                
                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                
                     
                     this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
        }
        }

        this.emit(':responseReady');
},

// This is the icespin attack for Klaki
'IceSpin' : function() {
        if (secondPlayerChar == klaki && turn == 2){
          // VideoApp.Play directives can be added to the response
         if (this.event.context.System.device.supportedInterfaces.VideoApp) {
             doDmgPlayerTwo(klaki, 'iceSpin');
             turn = 1;
//                if (pOneHp <= 0 && pTwoHp > 0)
//              {
//               winCondition("Player 2 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, icespinKlakRight);

                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                     //this.response.playVideo('https://s3.amazonaws.com/creaturecommand/klaki_water_attack.mp4').cardRenderer(cardTitle, cardContent, imageObj);
                     this.emit(':responseReady');
        
             
             
         } else {
             this.response.speak("The video cannot be played on your device. " +
             "To watch this video, try launching the skill from your echo show device.");
         }
        }
    else if (firstPlayerChar == klaki && turn == 1){
          if (this.event.context.System.device.supportedInterfaces.VideoApp) {
               doDmgPlayerOne(klaki, 'iceSpin');
              turn = 2;
//                  if (pTwoHp <= 0 && pOneHp > 0)
//              {
//               winCondition("Player 1 Wins!");
//               this.emit(':responseReady');
//              }
            renderTemplate.call(this, icespinKlakLeft);
            
                
                if(secondPlayerChar == 1){
                    
                    renderTemplate.call(this, chooseVaru);
               
                }else if(secondPlayerChar == 2){
          
          renderTemplate.call(this, chooseMomolt);

                }else if(secondPlayerChar == 3){
          
          renderTemplate.call(this, chooseBabool);

                }else if(secondPlayerChar == 4){
          
          renderTemplate.call(this, chooseKlaki);

                }
                
                     
                     this.emit(':responseReady');
        } else {
              this.response.speak("The video cannot be played on your device. " +
              "To watch this video, try launching the skill from your echo show device.");
         }
        }

        this.emit(':responseReady');
},


    'dodmgIntent' : function(){
        //this.response.playVideo('http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4');
    const videoSource = 'https://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4';
    const metadata = {
      'title': 'Title for Sample Video',
      'subtitle': 'Secondary Title for Sample Video'
    };
    this.response.playVideo(videoSource, metadata);
        this.emit(':responseReady');
    },
    
 'clacky_chosen' : function(){
        // make a differnt intent for each of the characters following this logic!
        if(pselection == 1){
            firstPlayerChar = 4; 
            pselection = 2;
           this.emit(':ask',"Player one you chose clacky ,Player two please choose a character!");
        }else{
            secondPlayerChar = 4;
            turn = 1;
            const outputSpeech = "Player two you chose clacky ,Player one choose an attack";
                const cardTitle = 'CURRENT HP';
                const cardContent = 'Player1hp: '+pOneHp+'/50  PLayer2hp'+pTwoHp+'/50';
                const repromptSpeech = ' ';
                var imageObj;
                if (firstPlayerChar == varu) {
             var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Varu+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };

}
else if (firstPlayerChar == momolt ) {
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Momolt+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          }; 
}
else if (firstPlayerChar == babool){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
    }

else if (firstPlayerChar == klaki){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
}
        renderTemplate.call(this, content);
        }
        
    },
        'varu_chosen' : function(){
        // make a differnt intent for each of the characters following this logic!
        if(pselection == 1){
            firstPlayerChar = 1; 
           pselection = 2;
           this.emit(':ask',"Player one you chose varu ,Player two please choose a character!");
        }else{
            secondPlayerChar = 1;
           const cardTitle = 'CURRENT HP';
                const cardContent = 'Player1hp: '+pOneHp+'/50  PLayer2hp'+pTwoHp+'/50';
                const repromptSpeech = ' ';
                const outputSpeech = "Player two you chose varu ,Player one choose an attack"
                var imageObj;
                if (firstPlayerChar == varu) {
                    var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Varu+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };

}
else if (firstPlayerChar == momolt ) {
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Momolt+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };    
}
else if (firstPlayerChar == babool){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
    
}
else if (firstPlayerChar == klaki){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
}
            renderTemplate.call(this, content);
      }  
    },

    'momolt_chosen' : function(){
    // make a differnt intent for each of the characters following this logic!
    if(pselection == 1){
       firstPlayerChar = momolt; 
       pselection = 2;
       this.emit(':ask',"Player one you chose Momolt ,Player two please choose a character!");
    }else{
        secondPlayerChar = momolt;
        turn = 1;
                const cardTitle = 'CURRENT HP';
                const cardContent = 'Player1hp: '+pOneHp+'/50  PLayer2hp'+pTwoHp+'/50';
                const repromptSpeech = ' ';
                const outputSpeech = "Player two you choose momolt ,Player one choose an attack";
                var imageObj;
                if (firstPlayerChar == varu) {
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Varu+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };

}
else if (firstPlayerChar == momolt ) {
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Momolt+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };    
}
else if (firstPlayerChar == babool){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
    
}
else if (firstPlayerChar == klaki){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
}
            renderTemplate.call(this, content);
    }
},

'babool_chosen' : function(){
    // make a differnt intent for each of the characters following this logic!
    if(pselection == 1){
       firstPlayerChar = babool; 
       pselection = 2;
       this.emit(':ask',"Player one you chose Babool ,Player two please choose a character!");
    }else{
        secondPlayerChar = babool;
        turn = 1;
           const cardTitle = 'CURRENT HP';
           const cardContent = 'Player1hp: '+pOneHp+'/50  PLayer2hp'+pTwoHp+'/50';
           const repromptSpeech = ' ';
           const outputSpeech = "Player two you chose babool ,Player one choose an attack";
           var imageObj;
         if (firstPlayerChar == varu) {
          var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Varu+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
}
else if (firstPlayerChar == momolt ) {
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Momolt+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };    
}
else if (firstPlayerChar == babool){
            var content = {
             "hasDisplaySpeechOutput" : "Select an attack",
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Player One Please select a character!",
             "bodyTemplateContent" : "",
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Babool+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
    
}
else if (firstPlayerChar == klaki){
      var text = "";
      var content = ""
              var content = {
             "hasDisplaySpeechOutput" : text,
             "hasDisplayRepromptText" : "Testing",
             "simpleCardTitle" : "Hello Sir",
             "simpleCardContent" : "This is card content",
             "bodyTemplateTitle" : "Body titile",
             "bodyTemplateContent" : content,
             "templateToken" : "factBodyTemplate",
             "bgimg": "https://s3.amazonaws.com/cre-imgs/Creature+Command+Character+Screen+Player1.png",
             "askOrTell" : ":ask",
             "sessionAttributes": {}
          };
          
          renderTemplate.call(this, content);
}
    }
    },
    'LaunchRequest': function () {
          
          renderTemplate.call(this, charSelectOne);
    },
    'AMAZON.HelpIntent': function () {
        this.attributes.speechOutput = this.t('HELP_MESSAGE');
        this.attributes.repromptSpeech = this.t('HELP_REPROMPT');
        this.emit(':ask', this.attributes.speechOutput, this.attributes.repromptSpeech);
    },
    'AMAZON.RepeatIntent': function () {
        this.emit(':ask', this.attributes.speechOutput, this.attributes.repromptSpeech);
    },
    'AMAZON.StopIntent': function () {
        reset();
        this.emit('SessionEndedRequest');
    },
    'AMAZON.CancelIntent': function () {
        reset();
        this.emit('SessionEndedRequest');
    },
    'SessionEndedRequest': function () {
        this.emit(':tell', this.t('STOP_MESSAGE'));
    },
    'Unhandled': function () {
        const message = 'Say yes to continue, or no to end the game.';
        this.response.speak(message)
                    .listen(message);
        this.emit(':responseReady');
    },
};

  function doDmgPlayerOne(pOneElement,pOneMove){
  //fire element character
  if(pOneElement == momolt){
    if(pOneMove == "punch"){
      var dmg = Math.floor(Math.random() * (16 - 10 + 1)) + 10;
        pTwoHp -= critChance(dmg);
    }else if (pOneMove == "earthquake") {
      var dmg = Math.floor(Math.random() * (12 - 10 + 1)) + 10;
        pTwoHp -= critChance(dmg);
    }
  }
  //water type character
  if(pOneElement == klaki){
    if(pOneMove == "waterBlast"){
      var dmg = Math.floor(Math.random() * (14 - 11 + 1)) + 11;
        //return critChance(dmg);
        pTwoHp -= critChance(dmg);
    }else if (pOneMove == "iceSpin") {
      var dmg = Math.floor(Math.random() * (9 - 6 + 1)) + 9;
        //return critChance(dmg);
        pTwoHp -= critChance(dmg);
    }
  }
  if(pOneElement == varu){
    if(pOneMove == "tornado"){
      var dmg = Math.floor(Math.random() * (12 - 9 + 1)) + 12;
        //return critChance(dmg);
        pTwoHp -= critChance(dmg);
    }else if (pOneMove == "fireball") {
      var dmg = Math.floor(Math.random() * (14 -  8 + 1 )) + 14;
        //return critChance(dmg);
        pTwoHp -= critChance(dmg);
    }
  }
  if(pOneElement == babool){
    if(pOneMove == "rocks"){
      var dmg = Math.floor(Math.random() * (15 - 13 + 1)) + 15;
        pTwoHp -= critChance(dmg);
    }else if (pOneMove == "waterpump") {
      var dmg = Math.floor(Math.random() * (11 -  8 + 1 )) + 11;
        pTwoHp -= critChance(dmg);
    }
  }
}


function doDmgPlayerTwo(pTwoElement,pTwoMove){
    //fire element character
  if(pTwoElement == momolt){
    if(pTwoMove == "punch"){
      var dmg = Math.floor(Math.random() * (16 - 10 + 1)) + 10;
        pOneHp -= critChance(dmg);
    }else if (pTwoMove == "earthquake") {
      var dmg = Math.floor(Math.random() * (12 - 10 + 1)) + 10;
        pOneHp -= critChance(dmg);
    }
  }
  //water type character
  if(pTwoElement == klaki){
    if(pTwoMove == "waterBlast"){
      var dmg = Math.floor(Math.random() * (14 - 11 + 1)) + 11;
        //return critChance(dmg);
        pOneHp -= critChance(dmg);
    }else if (pTwoMove == "iceSpin") {
      var dmg = Math.floor(Math.random() * (9 - 6 + 1)) + 9;
        //return critChance(dmg);
        pOneHp -= critChance(dmg);
    }
  }
  if(pTwoElement == varu){
    if(pTwoMove =="tornado"){
      var dmg = Math.floor(Math.random() * (12 - 9 + 1)) + 12;
        //return critChance(dmg);
        pOneHp -= critChance(dmg);
    }else if (pTwoMove == "fireball") {
      var dmg = Math.floor(Math.random() * (14 -  8 + 1 )) + 14;
        //return critChance(dmg);
        pOneHp -= critChance(dmg);
    }
  }
  if(pTwoElement == babool){
    if(pTwoMove == "rocks"){
      var dmg = Math.floor(Math.random() * (15 - 13 + 1)) + 15;
        pOneHp -= critChance(dmg);
    }else if (pTwoMove == "waterpump") {
      var dmg = Math.floor(Math.random() * (11 -  8 + 1 )) + 11;
        pOneHp -= critChance(dmg);
    }
  }

}

  function critChance(dmg){
  var chance = Math.floor(Math.random() * 100) + 1;
  //checks to see if chance is less than 6 out of 100
  if(chance < 10){
     return dmg * crit;
  }else{
    return dmg;
  }
  }
  
  function reset()
{
  firstPlayerChar = null;
  secondPlayerChar = null;
  pselection = 1;
  turn = 1;
  pOneHp = 50;
  pTwoHp = 50;
}


exports.handler = function (event, context) {
    const alexa = Alexa.handler(event, context);
    alexa.APP_ID = APP_ID;
    // To enable string internationalization (i18n) features, set a resources object.
    alexa.resources = languageStrings;
    alexa.registerHandlers(handlers);
    alexa.execute();
};

function winCondition(winner){
  //pOneHp
  //pTwoHp
     const cardTitle = winner;
      // VideoApp.Play directives can be added to the response
    if (this.event.context.System.device.supportedInterfaces.VideoApp) {
        this.response.cardRenderer(cardTitle,"WellDone!");
        this.emit(':responseReady');
    }else {
        this.response.speak("The video cannot be played on your device. " +
        "To watch this video, try launching the skill from your echo show device.");
        this.emit(':responseReady');
    }
    this.emit(':responseReady');
   }
   function renderTemplate (content) {
    var response = {
             "version": "1.0",
             "response": {
               "directives": [
                 {
                   "type": "Display.RenderTemplate",
                   "template": {
                     "type": "BodyTemplate1",
                     "title": content.bodyTemplateTitle,
                     "token": content.templateToken,
                         "backgroundImage": {
                          "contentDescription": "Textured grey background",
                          "sources": [
                            {
                              "url": content.bgimg,
                            }
                          ]
                         },
                     "textContent": {
                       "primaryText": {
                         "type": "RichText",
                         "text": "<font size = '5'>"+content.bodyTemplateContent+"</font>"
                       }
                     },
                     "backButton": "HIDDEN"
                   }
                 }
               ],
               "outputSpeech": {
                 "type": "SSML",
                 "ssml": "<speak>"+content.hasDisplaySpeechOutput+"</speak>"
               },
               "reprompt": {
                 "outputSpeech": {
                   "type": "SSML",
                   "ssml": "<speak>"+content.hasDisplayRepromptText+"</speak>"
                 }
               },
               "shouldEndSession": content.askOrTell==":tell",
               "card": {
                 "type": "Simple",
                 "title": content.simpleCardTitle,
                 "content": content.simpleCardContent
               }
             },
             "sessionAttributes": content.sessionAttributes
           }
           this.context.succeed(response); 
   }
